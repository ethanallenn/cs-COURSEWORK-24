import sqlite3
import os

# Get the directory of the current script
script_dir = os.path.dirname(os.path.abspath(__file__))

# Construct the path to the database file
db_path = os.path.join(script_dir, 'user_details.db')

# Connect to the database (or create it if it doesn't exist)
conn = sqlite3.connect(db_path)
cursor = conn.cursor()

# Create the users table if it doesn't exist
cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL,
    email TEXT NOT NULL,
    password TEXT NOT NULL
)
''')

# Function to add a new user
def add_user(username, email, password):
    cursor.execute('''
    INSERT INTO users (username, email, password)
    VALUES (?, ?, ?)
    ''', (username, email, password))
    conn.commit()

# Example usage
if __name__ == "__main__":
    # Replace these with actual form inputs
    username = input("Enter username: ")
    email = input("Enter email: ")
    password = input("Enter password: ")
    
    add_user(username, email, password)
    print("User added successfully!")

# Close the connection
conn.close()